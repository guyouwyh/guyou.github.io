<!-- build time:Thu Apr 21 2022 14:38:01 GMT+0800 (中国标准时间) --><!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><link rel="mask-icon" href="/images/logo.svg" color=""><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" title="努力走,走到灯火通明" href="https://guyouwyh.github.io/guyouwyh/rss.xml"><link rel="alternate" type="application/atom+xml" title="努力走,走到灯火通明" href="https://guyouwyh.github.io/guyouwyh/atom.xml"><link rel="alternate" type="application/json" title="努力走,走到灯火通明" href="https://guyouwyh.github.io/guyouwyh/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><link rel="canonical" href="https://guyouwyh.github.io/guyouwyh/2021/10/21/%E5%90%8E%E7%AB%AF/JavaWeb/servlet/"><title>JavaWeb笔记 - JavaWeb - 后端 | GuYou = 努力走,走到灯火通明</title><meta name="generator" content="Hexo 5.4.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">JavaWeb笔记</h1><div class="meta"><span class="item" title="创建时间：2021-10-21 19:57:45"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">发表于</span> <time itemprop="dateCreated datePublished" datetime="2021-10-21T19:57:45+08:00">2021-10-21</time> </span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">本文字数</span> <span>10k</span> <span class="text">字</span> </span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">阅读时长</span> <span>9 分钟</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">GuYou</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="https://s2.loli.net/2021/12/15/nQSr6Dxua7pIvlB.jpg"></li><li class="item" data-background-image="https://s2.loli.net/2021/12/15/8KdoJ6jO7mLCDUu.jpg"></li><li class="item" data-background-image="https://s2.loli.net/2021/12/15/IJoXjhzGPOQdi9c.jpg"></li><li class="item" data-background-image="https://s2.loli.net/2021/12/15/7E2sYl8uZARyLqh.jpg"></li><li class="item" data-background-image="https://s2.loli.net/2021/12/15/Q7NJ3nA9i2KwjfG.jpg"></li><li class="item" data-background-image="https://s2.loli.net/2021/12/15/Fdim5YeA7pl6tTj.jpg"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">首页</a></span><i class="ic i-angle-right"></i> <span itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/%E5%90%8E%E7%AB%AF/" itemprop="item" rel="index" title="分类于 后端"><span itemprop="name">后端</span></a><meta itemprop="position" content="1"></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/%E5%90%8E%E7%AB%AF/JavaWeb/" itemprop="item" rel="index" title="分类于 JavaWeb"><span itemprop="name">JavaWeb</span></a><meta itemprop="position" content="2"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://guyouwyh.github.io/guyouwyh/2021/10/21/%E5%90%8E%E7%AB%AF/JavaWeb/servlet/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="故犹"><meta itemprop="description" content=", "></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="努力走,走到灯火通明"></span><div class="body md" itemprop="articleBody"><h1 id="javaweb的概念"><a class="anchor" href="#javaweb的概念">#</a> JavaWeb 的概念</h1><p>javaweb 是指所有通过 java 语言编写可以通过浏览器访问的程序的总称，叫 javaweb</p><p>javaweb 是基于请求和响应开发软件的。</p><h1 id="请求和响应"><a class="anchor" href="#请求和响应">#</a> 请求和响应</h1><ul><li><p>请求是指客户端给服务器发送数据，叫请求 Request</p></li><li><p>响应是指服务器给客户端回传数据叫响应 Response</p></li><li><p>请求和响应是成对出现的，有请求就会有响应</p></li></ul><h1 id="动态web工程的目录"><a class="anchor" href="#动态web工程的目录">#</a> 动态 web 工程的目录</h1><ul><li><p>WEB-INF 目录是一个受服务器访问的目录。浏览器无法直接访问到此目录的内容</p></li><li><p>web.xml 它是整个动态 web 工程的配置部署描述文件，可以在这里配置很多 web 工程的组件，比如</p></li></ul><p>Servlet 程序、Filter 过滤器、Listener 监听器、Session 超时等等。</p><ul><li>lib 目录一般放在 WEB-INF 目录下，用于存放第三方 jar 包</li></ul><p>Servlet</p><ul><li>Servlet 是 javaEE 规范之一，规范就是接口</li><li>Servlet 是 JavaWeb 三大组件之一。三大组件分别是 Servlet、Filter 过滤器、Listener 监听器。</li><li>Servlet 是运行在服务器上的一个 java 小程序。它可以接受客户端发送过来的请求，并相应数据给客户端。</li></ul><h1 id="第一个servlet"><a class="anchor" href="#第一个servlet">#</a> 第一个 Servlet</h1><p><em>在 web.xml 中需要配置 servlet 的映射路径</em></p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token generics"><span class="token punctuation">&lt;</span>servlet<span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>        <span class="token operator">&lt;</span>servlet<span class="token operator">-</span>name<span class="token operator">></span><span class="token class-name">HelloServlet</span><span class="token operator">&lt;</span><span class="token operator">/</span>servlet<span class="token operator">-</span>name<span class="token operator">></span><span class="token comment">//servlet 的名称</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token operator">&lt;</span>servlet<span class="token operator">-</span><span class="token keyword">class</span><span class="token operator">></span><span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>wyh<span class="token punctuation">.</span></span>HelloServlet</span><span class="token operator">&lt;</span><span class="token operator">/</span>servlet<span class="token operator">-</span><span class="token keyword">class</span><span class="token operator">></span><span class="token comment">//servlet 实现类的全限定类名</span></pre></td></tr><tr><td data-num="4"></td><td><pre>            <span class="token operator">&lt;</span>load<span class="token operator">-</span>on<span class="token operator">-</span>startup<span class="token operator">></span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>load<span class="token operator">-</span>on<span class="token operator">-</span>startup<span class="token operator">></span> <span class="token comment">//Servlet 的创建时机，默认为 - 1, 表示第一次访问时候创建，如果为 0 或者正数，则表示服务器启动时候被创建</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token operator">&lt;</span><span class="token operator">/</span>servlet<span class="token operator">></span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token operator">&lt;</span>servlet<span class="token operator">-</span>mapping<span class="token operator">></span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token operator">&lt;</span>servlet<span class="token operator">-</span>name<span class="token operator">></span><span class="token class-name">HelloServlet</span><span class="token operator">&lt;</span><span class="token operator">/</span>servlet<span class="token operator">-</span>name<span class="token operator">></span><span class="token comment">// 要映射的 servlet 的名称</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token operator">&lt;</span>url<span class="token operator">-</span>pattern<span class="token operator">></span><span class="token operator">/</span>hello<span class="token operator">&lt;</span><span class="token operator">/</span>url<span class="token operator">-</span>pattern<span class="token operator">></span><span class="token comment">// 要映射的 servlet 的路径，即通过 url 访问 servlet 的路径</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token operator">&lt;</span><span class="token operator">/</span>servlet<span class="token operator">-</span>mapping<span class="token operator">></span></pre></td></tr></table></figure><p>Servlet 的生命周期</p><p>1. 执行 servlet 构造器方法</p><p>2. 执行 init 初始化方法</p><p>3. 执行 service 方法</p><p>4. 执行 destroy 销毁方法</p><p>注意：1，2 方法只有第一次访问时候会被调用</p><p>​ 3 方法每次访问时都会调用</p><p>​ 4 方法在 web 工程停止时会调用</p><p><strong>也可以使用注解 @WebServlet 进行配置路径映射</strong></p><p>需要引入依赖:</p><figure class="highlight xml"><figcaption data-lang="XML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.apache.tomcat.embed<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>tomcat-embed-core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>9.0.52<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span><span class="token string">"/demo1"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>       <span class="token function">doGet</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>resp<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h1 id="继承httpservlet来实现方法servlet程序"><a class="anchor" href="#继承httpservlet来实现方法servlet程序">#</a> 继承 HttpServlet 来实现方法 Servlet 程序</h1><p><strong><img data-src="https://tva1.sinaimg.cn/large/008eGmZEgy1gnt1axgty5j30jh0f2jsm.jpg" alt="servlet"></strong></p><h1 id="servletconfig类"><a class="anchor" href="#servletconfig类">#</a> ServletConfig 类</h1><p>Servlet 程序的配置信息类</p><p>三大作用：</p><ul><li>可以获取 Servlet 程序的别名 servlet-name 的值</li><li>可以获取初始化参数 init-param</li><li>获取 ServletContext 对象</li></ul><h1 id="servletcontext"><a class="anchor" href="#servletcontext">#</a> ServletContext</h1><ul><li>ServletContext 是一个接口，它表示一个 servlet 上下文对象</li><li>一个 web 工程，只有一个 ServletContext 对象实例</li><li>ServletContext 对象是一个域对象</li><li>在 web 工程部署启动的时候创建。在 web 工程停止的时候销毁。</li></ul><p>域对象：是可以像 Map 一样存储数据的对象，叫域对象。</p><p>这里的域指的是存储数据的操作范围。</p><table><thead><tr><th></th><th><strong>存数据</strong></th><th><strong>取数据</strong></th><th><strong>删除数据</strong></th></tr></thead><tbody><tr><td><strong>Map</strong></td><td><strong>put()</strong></td><td><strong>get()</strong></td><td><strong>remove()</strong></td></tr><tr><td><strong>域对象</strong></td><td><strong>setAttribute()</strong></td><td><strong>getAtrribute()</strong></td><td><strong>removeAtrribute()</strong></td></tr></tbody></table><p>四个常见作用</p><ul><li>获取 web.xml 中配置的上下文参数 context-param</li></ul><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token operator">&lt;</span>context<span class="token operator">-</span>param<span class="token operator">></span></pre></td></tr><tr><td data-num="2"></td><td><pre>        <span class="token operator">&lt;</span>param<span class="token operator">-</span>name<span class="token operator">></span>username<span class="token operator">&lt;</span><span class="token operator">/</span>param<span class="token operator">-</span>name<span class="token operator">></span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token operator">&lt;</span>param<span class="token operator">-</span>value<span class="token operator">></span>考嫩娘<span class="token operator">&lt;</span><span class="token operator">/</span>param<span class="token operator">-</span>value<span class="token operator">></span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token operator">&lt;</span><span class="token operator">/</span>context<span class="token operator">-</span>param<span class="token operator">></span></pre></td></tr><tr><td data-num="5"></td><td><pre>    </pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">doGet</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> resp<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token class-name">ServletContext</span> servletContext <span class="token operator">=</span> <span class="token function">getServletConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token class-name">String</span> username <span class="token operator">=</span> servletContext<span class="token punctuation">.</span><span class="token function">getInitParameter</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><ul><li>获取当前的工程路径，格式：/ 工程路径</li></ul><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">ServletContext</span> servletContext <span class="token operator">=</span> <span class="token function">getServletConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>        <span class="token class-name">String</span> contextPath <span class="token operator">=</span> servletContext<span class="token punctuation">.</span><span class="token function">getContextPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>contextPath<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><ul><li>获取工程部署后在服务器硬盘上的绝对路径</li></ul><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">doGet</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> resp<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>        <span class="token class-name">ServletContext</span> servletContext <span class="token operator">=</span> <span class="token function">getServletConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token class-name">String</span> realPath <span class="token operator">=</span> servletContext<span class="token punctuation">.</span><span class="token function">getRealPath</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>realPath<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>'/' 表示就是当前工程目录，即 webapp 目录</p><p>工程名其实就是映射 webapp 下的工程目录</p><ul><li>像 map 一样存取数据</li></ul><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">ServletContext</span> servletContext <span class="token operator">=</span> <span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>        servletContext<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">,</span><span class="token string">"wyh"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token class-name">Object</span> username <span class="token operator">=</span> servletContext<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h1 id="http协议"><a class="anchor" href="#http协议">#</a> Http 协议</h1><p>指客户端和服务器之间通信时发送的数据需要遵守的规则叫 Http 协议</p><p>客户端给服务器发送数据时叫请求。</p><p>服务器给客户端传回数据叫响应。</p><h2 id="get请求"><a class="anchor" href="#get请求">#</a> GET 请求</h2><ul><li>请求行</li></ul><p>​ 1. 请求的方式</p><p>​ 2. 请求的资源路径</p><p>​ 3. 请求的协议的版本号</p><ul><li>请求头</li></ul><p>​ 基本的内容 **</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">Accept</span><span class="token operator">:</span>告诉服务器，客户端可以接收的数据类型</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token class-name">Accept</span><span class="token operator">-</span><span class="token class-name">Language</span>：告诉服务器客户端可以接收的语言类型</pre></td></tr><tr><td data-num="3"></td><td><pre> zh_CN 中文中国</pre></td></tr><tr><td data-num="4"></td><td><pre> en_US 英文美国</pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token class-name">User</span><span class="token operator">-</span><span class="token class-name">Agent</span>：浏览器的信息</pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token class-name">Accept</span><span class="token operator">-</span><span class="token class-name">Encoding</span><span class="token operator">:</span>告诉服务器，客户端可以接收的数据编码格式</pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token class-name">Host</span>：表示请求的服务器ip和端口号</pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token class-name">Connection</span><span class="token operator">:</span>告诉服务器请求连接如何处理</pre></td></tr><tr><td data-num="9"></td><td><pre>     <span class="token class-name">Keep</span><span class="token operator">-</span><span class="token class-name">Alive</span> 告诉服务器回传数据不要马上关闭，保持一段时间的连接</pre></td></tr><tr><td data-num="10"></td><td><pre>     <span class="token class-name">Closed</span> 马上关闭</pre></td></tr></table></figure><h2 id="post请求"><a class="anchor" href="#post请求">#</a> POST 请求</h2><ul><li>请求行</li></ul><p>​ 1. 请求方式 POST</p><p>​ 2. 请求的资源路径</p><p>​ 3. 请求的协议版本号 HTTP/1.1</p><ul><li>请求头</li></ul><p>key-value, 不同的响应头，有其不同的含义</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">Accept</span><span class="token operator">:</span>表示客户端可以接收的数据类型</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token class-name">Accept</span><span class="token operator">-</span>language：表示客户端可以接收的语言类型</pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token class-name">User</span><span class="token operator">-</span><span class="token class-name">Agent</span><span class="token operator">:</span>表示客户端浏览器的信息</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token class-name">Host</span><span class="token operator">:</span>表示请求时的服务器ip和端口号</pre></td></tr></table></figure><ul><li><p>请求体</p><p>发送给服务器的数据</p></li></ul><h2 id="响应"><a class="anchor" href="#响应">#</a> 响应</h2><ul><li>响应行</li></ul><p>​ 1. 响应的协议和版本号 HTTP/1.1</p><p>​ 2. 响应的状态码 200</p><p>​ 3. 响应状态描述符 ok</p><ul><li>响应头</li></ul><p>key：value 不同的响应头，有其不同的含义</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">Server</span><span class="token operator">:</span>表示服务器的信息</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token class-name">Content</span><span class="token operator">-</span><span class="token class-name">Type</span>：表示响应体的数据</pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token class-name">Content</span><span class="token operator">-</span><span class="token class-name">Length</span>：响应体的长度</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token class-name">Date</span><span class="token operator">:</span>请求响应的时间</pre></td></tr></table></figure><ul><li>响应体</li></ul><p>回传给客户端的数据</p><h2 id="常见响应码的说明"><a class="anchor" href="#常见响应码的说明">#</a> 常见响应码的说明</h2><ul><li>200：表示请求成功</li><li>302：表示请求重定向</li><li>404：表示请求服务器已收到，但是请求地址错误</li><li>500: 表示服务器已经收到请求，但是服务器内部错误</li></ul><h1 id="httpservletrequest类"><a class="anchor" href="#httpservletrequest类">#</a> HttpServletRequest 类</h1><p>每次只要有请求进入 Tomcat 服务器，Tomcat 服务器就会把请求过来的 Http 协议信息解析号封装到 Request 对象中，然后传递到 service 方法 (dopost 和 doget) 中给我们使用，我们可以通过 HttpServletRequest 对象，获取所有请求的信息。</p><h2 id="常用方法"><a class="anchor" href="#常用方法">#</a> 常用方法</h2><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">getRequestURI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span>获取请求的资源路径</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">getRequestURL</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span>获取请求的统一资源定位符</pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token function">getRemoteHost</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span>获取客户端的ip地址</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span>获取请求头</pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span>获取请求的参数</pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token function">getParameterValues</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>获取请求的多个参数</pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span>获取请求的方式GET或<span class="token class-name">POST</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token function">setAttribute</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span>value<span class="token punctuation">)</span><span class="token operator">:</span>设置域数据</pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token function">getAttribute</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token operator">:</span>获取域数据</pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span>获取请求转发的对象  </pre></td></tr><tr><td data-num="11"></td><td><pre> <span class="token function">getContextPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span>获取项目目录或者说是虚拟目录</pre></td></tr><tr><td data-num="12"></td><td><pre> <span class="token function">getServletPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span>获取servlet的路径</pre></td></tr></table></figure><p>注意：如果是通过 post 请求提交的，使用 getParameter () 获取参数如果是中文会乱码，因此要先设置 uf8 编码</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre>req<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">"utf-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h2 id="请求转发"><a class="anchor" href="#请求转发">#</a> 请求转发</h2><p>请求转发是指：服务器收到请求后，从一个资源跳转到领一个资源的请求叫请求转发</p><p>特点：</p><ul><li>浏览器地址没有变化</li><li>他们是一次请求</li><li>他们共享 Request 域中的数据</li><li>可以转发到 WEB-INF 目录下</li><li>不能访问工程以外的资源</li></ul><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">RequestDispatcher</span> requestDispatcher <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"/hi"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>        requestDispatcher<span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>resp<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">//getRequestDispatcher ("目的地"), 转发到哪个 servlet，然后 forward 相当于把域对象传过去</span></pre></td></tr></table></figure><h2 id="base标签"><a class="anchor" href="#base标签">#</a> base 标签</h2><p>base 标签设置相对路径工作参照的地址</p><figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>base</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span> <span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>base</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><h1 id="相对路径和绝对路径"><a class="anchor" href="#相对路径和绝对路径">#</a> 相对路径和绝对路径</h1><p>绝对路径:</p><ul><li>斜杆如果被浏览器解析，得到的地址是：<span class="exturl" data-url="aHR0cDovL2lwLy9wb3J0Lw==">http://ip//port/</span></li></ul><figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>斜杆<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>response.sendRediect("/"); 发送给浏览器解析</pre></td></tr></table></figure><ul><li>斜杆如果被服务器解析，得到的地址是:<span class="exturl" data-url="aHR0cDovL2lwLyVFNSVCNyVBNSVFNyVBOCU4QiVFOCVCNyVBRiVFNSVCRSU4NA==">http://ip/ 工程路径</span></li></ul><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token operator">&lt;</span>url<span class="token operator">-</span>pattern<span class="token operator">></span><span class="token operator">/</span>servlet1<span class="token operator">&lt;</span><span class="token operator">/</span>url<span class="token operator">-</span>pattern<span class="token operator">></span></pre></td></tr><tr><td data-num="2"></td><td><pre>servletContext<span class="token punctuation">.</span><span class="token function">getRealPath</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>request<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>相对路径:</p><p>./ 开头或者省略，相对与当前目录的下的路径</p><h1 id="httpservletresponse类"><a class="anchor" href="#httpservletresponse类">#</a> HttpServletResponse 类</h1><p>每次请求进来，Tomcat 服务器都会创建一个 Response 对象传递给 Servlet 程序去使用。HttpServletResponse 表示请求过来的信息，HttpServletResponse 表示所有响应信息</p><h2 id="解决响应的中文乱码问题"><a class="anchor" href="#解决响应的中文乱码问题">#</a> 解决响应的中文乱码问题</h2><p>方法一：</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">String</span> characterEncoding <span class="token operator">=</span> resp<span class="token punctuation">.</span><span class="token function">getCharacterEncoding</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 获取当前服务器的字符集 默认字符集为 ISO-8858-1</span></pre></td></tr><tr><td data-num="2"></td><td><pre>        resp<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">"utf-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 设置服务器的字符集为 utf-8</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        resp<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">"Content-type"</span><span class="token punctuation">,</span><span class="token string">"text/html;charset=utf-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 通过响应头设置浏览器解析的字符集为 utf-8</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token class-name">PrintWriter</span> writer <span class="token operator">=</span> resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 获取输出流</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        writer<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"我是你爸爸"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>方法二：</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre>resp<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">"text/html; charset=utf-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>resp<span class="token punctuation">.</span><span class="token function">getCharacterEncoding</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">// 同时可以设置服务器和浏览器的字符集，但是必须在创建流对象之前调用</span></pre></td></tr></table></figure><h2 id="请求重定向"><a class="anchor" href="#请求重定向">#</a> 请求重定向</h2><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre>resp<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span><span class="token string">"location"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>特点：</p><ul><li>浏览器地址会发生变化</li><li>两次请求</li><li>不共享 Request 域中的数据</li><li>不能访问 WEB-INF 目录</li><li>可以访问工程外的资源</li></ul><h1 id="servletcontext对象"><a class="anchor" href="#servletcontext对象">#</a> ServletContext 对象</h1><hr><p>概念：代表整个 web 应用，可以和程序的容器 (服务器) 来通信</p><p>功能:</p><ol><li><p><strong>获取 MIME 类型</strong></p><p>MIME 类型：在互联网通信过程中定义的一种文件数据类型</p><p>格式：大类型 / 小类型</p><p>例如:text/html image/jpeg</p><p>通过 servletContext.getMimeType () 可以获取</p></li><li><p><strong>域对象：共享数据</strong></p><p>作用域：所有用户请求的数据</p></li><li><p><strong>获取文件的真实路径</strong></p><p>方法:</p></li></ol><h1 id="servletcontextlistener监听器"><a class="anchor" href="#servletcontextlistener监听器">#</a> ServletContextListener 监听器</h1><p>监听器:</p><ul><li><p>Listener 监听器是 javaweb 的三大组件之一。</p></li><li><p>listener 它是 javaee 的规范，是接口</p></li><li><p>监听器的作用：监听某种事物的变化，然后返回回调函数，反馈给程序去做一些相应的处理</p></li></ul><p>ServletContextListener 可以监听 ServletContext 对象的创建和销毁</p><p>监听器创建和销毁之后都会分别调用 ServletContextListener 监听方法反馈</p><p>监听步骤：</p><p>1. 编写一个类去实现 ServletContext 对象</p><p>2. 实现其两个回调方法</p><p>3. 到 web.xml 中去配置监听器</p><h1 id="文件上传"><a class="anchor" href="#文件上传">#</a> 文件上传</h1><p>1. 要有一个 form 标签，method=post 请求</p><p>2.form 标签的 encType 属性值必须为 multipart/form-data 值</p><p>3. 在 form 标签中使用 input type=file 添加上传文件</p><p>4. 编写服务器代码接收，处理上传的数据</p><h1 id="cookie"><a class="anchor" href="#cookie">#</a> Cookie</h1><hr><p>会话：一次会话包含多次请求和响应，浏览器第一次给服务器资源发送请求，会话建立，直到有一方断开为止</p><p>功能：在一次会话的范围内共享数据</p><ul><li>Cookie 是服务器通知客户端保存键值对的一种会话技术。</li><li>客户端有了 Cookie 后，每次请求都发送给服务器。</li><li>浏览器对于每个 Cookie 的大小有限制，不能超过 4kb, 对于同一域名下的 cookie 数量也有限制 (20 个)。</li></ul><p>创建 cookie 对象</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">Cookie</span> cookie <span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Cookie</span><span class="token punctuation">(</span><span class="token string">"key"</span><span class="token punctuation">,</span><span class="token string">"value"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>通知客户端保存 Cookie</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre>resp<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>cookie<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 因为要通知客户端 所以调用 response 的方法 addCookie</span></pre></td></tr></table></figure><p><strong><img data-src="https://tva1.sinaimg.cn/large/008eGmZEgy1gnt18dviqaj30mx0cuwgc.jpg" alt="Cookie的创建"></strong></p><p>获取 Cookie</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">Cookie</span><span class="token punctuation">[</span><span class="token punctuation">]</span> cookies<span class="token operator">=</span>req<span class="token punctuation">.</span><span class="token function">getCookies</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>cookie<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span>获取COOKIE的键</pre></td></tr><tr><td data-num="3"></td><td><pre>cookie<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span>获取<span class="token class-name">Cookie</span>的值</pre></td></tr></table></figure><p>注意：没有获取指定 Cookie 的方法，只能通过遍历所有 cookie 的方式查找指定 cookie</p><p>修改 Cookie 的值</p><p>1. 先创建一个要修改的同名 Cookie 对象</p><p>2. 在构造器同时赋予新的 Cookie 的值</p><p>3. 调用 response.addCookie (cookie)</p><p>Cookie 的生命控制</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMaxAge</span><span class="token punctuation">(</span><span class="token keyword">int</span> second<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre> <span class="token comment">// 正数表示指定秒数后过期</span></pre></td></tr><tr><td data-num="3"></td><td><pre> <span class="token comment">// 负数表示浏览器一关，Cookie 就会被删除      默认为 (-1)</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token comment">//0 表示马上过期</span></pre></td></tr></table></figure><p>Cookie 有效路径 path 的设置</p><p>Cookie 的 path 属性可以有效的过滤哪些 Cookie 可以发送给服务器，哪些不发，path 属性是通过请求的地址来进行有效的过滤</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">Cookie</span> <span class="token class-name">A</span> path<span class="token operator">=</span><span class="token operator">/</span>工程路径</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token class-name">COOkie</span> <span class="token class-name">B</span> path<span class="token operator">=</span><span class="token operator">/</span>工程路径<span class="token operator">/</span>abc</pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre>请求地址如下：</pre></td></tr><tr><td data-num="5"></td><td><pre>  html<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>ip<span class="token operator">:</span>port<span class="token operator">/</span>工程路径<span class="token operator">/</span>a<span class="token punctuation">.</span>html</pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token class-name">CookieA</span> 发送</pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token class-name">CookieB</span> 不发送</pre></td></tr><tr><td data-num="8"></td><td><pre>  </pre></td></tr><tr><td data-num="9"></td><td><pre>  html<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>ip<span class="token operator">:</span>port<span class="token operator">/</span>工程路径<span class="token operator">/</span>abc<span class="token operator">/</span>a<span class="token punctuation">.</span>html</pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token class-name">Cookie</span> <span class="token class-name">A</span> 发送</pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token class-name">Cookie</span> <span class="token class-name">B</span> 发送</pre></td></tr></table></figure><blockquote><h2 id="cookie共享问题"><a class="anchor" href="#cookie共享问题">#</a> cookie 共享问题</h2></blockquote><p>不同的 tomcat 服务器间 cookie 可以通过使用 setDomain (String path) 共享</p><p>如果设置一级域名相同，那么多个服务器之间 cookie 可以共享。</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token operator">*</span><span class="token function">setDomain</span><span class="token punctuation">(</span><span class="token class-name">String</span> path<span class="token punctuation">)</span><span class="token operator">:</span>那么tieba<span class="token punctuation">.</span>daidu<span class="token punctuation">.</span>com和news<span class="token punctuation">.</span>baidu<span class="token punctuation">.</span>com中cookie可以共享</pre></td></tr></table></figure><h1 id="session"><a class="anchor" href="#session">#</a> Session</h1><p>概念：服务端会话技术，在一次会话的多次请求同时共享数据，将数据保存在服务器端的对象中</p><ul><li>Session 是一个接口 (HttpSession)</li><li>Session 就是会话，它是用来维护一个客户端和服务器之间关联的一种技术</li><li>每个客户端都有自己的一个 Session 会话。</li><li>Session 会话中，经常用来保存用户登录之后的信息</li></ul><p>Session 的创建和获取</p><pre><code class="language-JAVA">HttpSession session=request.getSession();
第一次调用是创建Session会话,之后调用都是获得前面创建好的Session会话对象
isNew():判断是不是刚刚创建出来的
getId()：得到Session的会话id值  每个Session都有一个唯一标识id值  
</code></pre><p>Session 的生命周期控制</p><p>Session 的默认存货时长为 30 分钟 (在 tomcat 的 web.xml 有配置)</p><figure class="highlight xml"><figcaption data-lang="XML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>session-config</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>session-timeout</span><span class="token punctuation">></span></span>20<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>session-timeout</span><span class="token punctuation">></span></span> <span class="token comment">&lt;!-- 在 web.xml 可以修改整个工程的 session 存活时间，这里是 20 分钟 --></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>session-config</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p>如果要单独修改 session 的存活时间</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre>session<span class="token punctuation">.</span><span class="token function">setMaxinactiveInterval</span><span class="token punctuation">(</span><span class="token keyword">int</span> interval<span class="token punctuation">)</span>；<span class="token comment">// 设置某个 Session 的存活时间，单位为秒</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token comment">// 正数表示超时时间</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token comment">// 负数表示用不超时</span></pre></td></tr></table></figure><p>Session 超时是指，客户端两次请求的最大间隔时间</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">invalidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">// 把 Session 设置为超时</span></pre></td></tr></table></figure><p><strong><img data-src="https://tva1.sinaimg.cn/large/008eGmZEgy1gnt1880ghyj30q70i3tcg.jpg" alt="浏览器和Session之间关联的底层细节"></strong></p><blockquote><h2 id="细节"><a class="anchor" href="#细节">#</a> 细节</h2></blockquote><ol><li><p>当客户端关闭后，服务器不关闭，两次获取的 session 不是同一个，因为会话关闭了，cookie 没有，服务端会重新创建一个 session。如果需要 session 相同，可以创建 cookie, 设置键为 JSESSIONID, 设置最大存活时间，让 cookie 持久化保存</p></li><li><p>客户端不关闭，服务器关闭后，两次获取的 session 不是同一个。但是要确保数据不丢失，</p><ul><li>session 的钝化：在服务器正常关闭之前，将 session 对象序列化到硬盘上</li><li>session 的活化：在服务器启动之后，将 session 文件转化为内存中的 session 对象</li></ul><p>Tomcat 已经帮助我们自动实现了钝化和活化，序列化文件保存在 work 目录下</p></li></ol><h1 id="表单重复提交验证码解决"><a class="anchor" href="#表单重复提交验证码解决">#</a> 表单重复提交 (验证码解决)</h1><ul><li>提交完表单，服务器使用请求转发来进行页面跳转，这个时候用户按下 f5，就会发起一次请求，造成表单重复提交问题。</li><li>用户正常提交给服务器，由于网络延迟问题，迟迟未收到响应。然后多点了几次提交，造成表单重复提交问题</li><li>用户正常提交服务器，但是提交完成后，用户退回浏览器，重新提交，也会造成表单重复提交问题</li></ul><h1 id="filter过滤器"><a class="anchor" href="#filter过滤器">#</a> Filter 过滤器</h1><ul><li>javaee 的规范，也是借口</li><li>作用：拦截请求、过滤响应</li></ul><figure class="highlight xml"><figcaption data-lang="XML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span><span class="token punctuation">></span></span> <span class="token comment">&lt;!--filter 标签用于配置一个 Filter 过滤器 --></span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-name</span><span class="token punctuation">></span></span> <span class="token comment">&lt;!-- 给 filter 类起别名 --></span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-name</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-class</span><span class="token punctuation">></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-class</span><span class="token punctuation">></span></span> <span class="token comment">&lt;!--filter 的全类名 --></span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-mapping</span><span class="token punctuation">></span></span> </pre></td></tr><tr><td data-num="8"></td><td><pre> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-name</span><span class="token punctuation">></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-name</span><span class="token punctuation">></span></span> <span class="token comment">&lt;!--filter-name 表示当前的拦截路径给哪个 filter 使用 --></span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span><span class="token comment">&lt;!-- 配置拦截路径</span></pre></td></tr><tr><td data-num="10"></td><td><pre>   / 表示请求地址为 http://ip:port / 工程路径 /  映射到 webapp 目录</pre></td></tr><tr><td data-num="11"></td><td><pre>   </pre></td></tr><tr><td data-num="12"></td><td><pre>--></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-mapping</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyFilter</span> <span class="token keyword">implements</span> <span class="token class-name">Filter</span> <span class="token punctuation">&#123;</span><span class="token comment">// 实现 Filter 接口</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">ServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> chain<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">ServletException</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    </pre></td></tr><tr><td data-num="5"></td><td><pre>        </pre></td></tr><tr><td data-num="6"></td><td><pre>        chain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 很重要！！没有这行过滤器就不会放行</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="filter的生命周期"><a class="anchor" href="#filter的生命周期">#</a> Filter 的生命周期</h2><ul><li>构造器方法</li><li>init 方法</li></ul><p>在 web 工程启动时候会执行</p><ul><li>doFilter 过滤方法</li></ul><p>每次拦截到请求就会执行</p><ul><li>destroy 销毁</li></ul><p>停止 web 工程时候，就会执行，销毁过滤器</p><h2 id="filterconfig类"><a class="anchor" href="#filterconfig类">#</a> FilterConfig 类</h2><p>它是 Filter 过滤器的配置文件</p><p>Tomcat 每次创建 Filter 时，也会同时创建一个 FilterConfig 类，包含 Filter 的配置信息</p><ul><li>获取 Filter 的名称 filter-name 的内容</li><li>获取在 Filter 中配置的 init-param 初始化参数</li><li>获取 ServletContext 对象</li></ul><h2 id="filterchain-过滤器链"><a class="anchor" href="#filterchain-过滤器链">#</a> FilterChain 过滤器链</h2><p>多个过滤器如何一起工作</p><p><strong><img data-src="https://tva1.sinaimg.cn/large/008eGmZEgy1gnt17yw1yqj30oo0f676e.jpg" alt="Filter过滤器"></strong></p><p>多个过滤器执行的特点</p><ul><li>所有 filter 和目标资源默认都执行在同一个线程中</li><li>多个 filter 共同执行的时候，它们都是用同一个 request 域对象</li></ul><hr><p>FilterChain.doFilter () 方法的作用</p><ul><li>如果有下一个过滤器，执行下一个 Filter 过滤器</li><li>如果没有 Filter 执行目标资源</li></ul><p>注意：在多个 Filter 过滤器执行的时候，它们执行的优先顺序是由他们在 web.xml 中从上到下配置的顺序决定的！</p><p>如果使用注解方式配置过滤器，按照类名的字符串比较顺序比较，值小的先执行</p><h2 id="拦截路径的三种匹配方法"><a class="anchor" href="#拦截路径的三种匹配方法">#</a> 拦截路径的三种匹配方法</h2><ul><li>精确匹配</li></ul><figure class="highlight xml"><figcaption data-lang="XML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>/target.jsp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>表示请求地址必须为：http://ip:port/工程路径/target。jsp</pre></td></tr></table></figure><ul><li>目录匹配</li></ul><figure class="highlight xml"><figcaption data-lang="XML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>/admin/*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>表示请求地址必须为:http://ip:port/工程路径/admin/*</pre></td></tr></table></figure><ul><li>后缀名匹配</li></ul><figure class="highlight xml"><figcaption data-lang="XML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>*.html<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>表示请求地址必须以 .html结尾才会拦截到</pre></td></tr></table></figure><p>Filter 过滤器它之关系请求的地址是否匹配，不关心请求的资源是否存在。</p><h2 id="拦截方式的配置"><a class="anchor" href="#拦截方式的配置">#</a> 拦截方式的配置</h2><hr><p>拦截方式配置即资源被访问的方式</p><ul><li>注解配置<ul><li>设置 dispatcherTypes 属性<ul><li>REQUEST: 默认值，浏览器直接请求资源</li><li>FORWARD: 转发访问资源</li><li>INCLUDE: 包含访问资源</li><li>ERROR: 错误跳转资源</li><li>ASYNC: 异步访问资源</li></ul></li></ul></li></ul><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * @author wyh</pre></td></tr><tr><td data-num="3"></td><td><pre> * @date 2021/9/22</pre></td></tr><tr><td data-num="4"></td><td><pre> **/</pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token annotation punctuation">@WebFilter</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"/index.jsp"</span><span class="token punctuation">,</span>dispatcherTypes <span class="token operator">=</span> <span class="token class-name">DispatcherType</span><span class="token punctuation">.</span>REQUEST<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyFilter</span> <span class="token keyword">implements</span> <span class="token class-name">Filter</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token class-name">FilterConfig</span> filterConfig<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">ServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> chain<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">ServletException</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"你被打劫了"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        chain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="20"></td><td><pre></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><ul><li>webxml 配置<ul><li>设置 &lt;dispatcher&gt;&lt;/dispatcher &gt; 标签即可</li></ul></li></ul></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">更新于</span> <time title="修改时间：2021-10-21 19:58:32" itemprop="dateModified" datetime="2021-10-21T19:58:32+08:00">2021-10-21</time></span></div><div id="copyright"><ul><li class="author"><strong>本文作者： </strong>故犹 <i class="ic i-at"><em>@</em></i>努力走,走到灯火通明</li><li class="link"><strong>本文链接：</strong> <a href="https://guyouwyh.github.io/guyouwyh/2021/10/21/%E5%90%8E%E7%AB%AF/JavaWeb/servlet/" title="JavaWeb笔记">https://guyouwyh.github.io/guyouwyh/2021/10/21/后端/JavaWeb/servlet/</a></li><li class="license"><strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/2021/10/21/%E5%90%8E%E7%AB%AF/JavaWeb/Maven/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;s2.loli.net&#x2F;2021&#x2F;12&#x2F;15&#x2F;b3sx9vieEGjrnaB.jpg" title="Maven笔记"><span class="type">上一篇</span> <span class="category"><i class="ic i-flag"></i> JavaWeb</span><h3>Maven笔记</h3></a></div><div class="item right"><a href="/2021/10/21/%E5%90%8E%E7%AB%AF/JavaWeb/JDBC/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;s2.loli.net&#x2F;2021&#x2F;12&#x2F;15&#x2F;Q7NJ3nA9i2KwjfG.jpg" title="JDBC笔记"><span class="type">下一篇</span> <span class="category"><i class="ic i-flag"></i> JavaWeb</span><h3>JDBC笔记</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#javaweb%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="toc-number">1.</span> <span class="toc-text">JavaWeb 的概念</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E5%92%8C%E5%93%8D%E5%BA%94"><span class="toc-number">2.</span> <span class="toc-text">请求和响应</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8A%A8%E6%80%81web%E5%B7%A5%E7%A8%8B%E7%9A%84%E7%9B%AE%E5%BD%95"><span class="toc-number">3.</span> <span class="toc-text">动态 web 工程的目录</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E4%B8%AAservlet"><span class="toc-number">4.</span> <span class="toc-text">第一个 Servlet</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BB%A7%E6%89%BFhttpservlet%E6%9D%A5%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%B3%95servlet%E7%A8%8B%E5%BA%8F"><span class="toc-number">5.</span> <span class="toc-text">继承 HttpServlet 来实现方法 Servlet 程序</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#servletconfig%E7%B1%BB"><span class="toc-number">6.</span> <span class="toc-text">ServletConfig 类</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#servletcontext"><span class="toc-number">7.</span> <span class="toc-text">ServletContext</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#http%E5%8D%8F%E8%AE%AE"><span class="toc-number">8.</span> <span class="toc-text">Http 协议</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#get%E8%AF%B7%E6%B1%82"><span class="toc-number">8.1.</span> <span class="toc-text">GET 请求</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#post%E8%AF%B7%E6%B1%82"><span class="toc-number">8.2.</span> <span class="toc-text">POST 请求</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%93%8D%E5%BA%94"><span class="toc-number">8.3.</span> <span class="toc-text">响应</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E5%93%8D%E5%BA%94%E7%A0%81%E7%9A%84%E8%AF%B4%E6%98%8E"><span class="toc-number">8.4.</span> <span class="toc-text">常见响应码的说明</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#httpservletrequest%E7%B1%BB"><span class="toc-number">9.</span> <span class="toc-text">HttpServletRequest 类</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-number">9.1.</span> <span class="toc-text">常用方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E8%BD%AC%E5%8F%91"><span class="toc-number">9.2.</span> <span class="toc-text">请求转发</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#base%E6%A0%87%E7%AD%BE"><span class="toc-number">9.3.</span> <span class="toc-text">base 标签</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%9B%B8%E5%AF%B9%E8%B7%AF%E5%BE%84%E5%92%8C%E7%BB%9D%E5%AF%B9%E8%B7%AF%E5%BE%84"><span class="toc-number">10.</span> <span class="toc-text">相对路径和绝对路径</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#httpservletresponse%E7%B1%BB"><span class="toc-number">11.</span> <span class="toc-text">HttpServletResponse 类</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3%E5%93%8D%E5%BA%94%E7%9A%84%E4%B8%AD%E6%96%87%E4%B9%B1%E7%A0%81%E9%97%AE%E9%A2%98"><span class="toc-number">11.1.</span> <span class="toc-text">解决响应的中文乱码问题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-number">11.2.</span> <span class="toc-text">请求重定向</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#servletcontext%E5%AF%B9%E8%B1%A1"><span class="toc-number">12.</span> <span class="toc-text">ServletContext 对象</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#servletcontextlistener%E7%9B%91%E5%90%AC%E5%99%A8"><span class="toc-number">13.</span> <span class="toc-text">ServletContextListener 监听器</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0"><span class="toc-number">14.</span> <span class="toc-text">文件上传</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#cookie"><span class="toc-number">15.</span> <span class="toc-text">Cookie</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#cookie%E5%85%B1%E4%BA%AB%E9%97%AE%E9%A2%98"><span class="toc-number">15.1.</span> <span class="toc-text">cookie 共享问题</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#session"><span class="toc-number">16.</span> <span class="toc-text">Session</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%86%E8%8A%82"><span class="toc-number">16.1.</span> <span class="toc-text">细节</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%A1%A8%E5%8D%95%E9%87%8D%E5%A4%8D%E6%8F%90%E4%BA%A4%E9%AA%8C%E8%AF%81%E7%A0%81%E8%A7%A3%E5%86%B3"><span class="toc-number">17.</span> <span class="toc-text">表单重复提交 (验证码解决)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#filter%E8%BF%87%E6%BB%A4%E5%99%A8"><span class="toc-number">18.</span> <span class="toc-text">Filter 过滤器</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#filter%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">18.1.</span> <span class="toc-text">Filter 的生命周期</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#filterconfig%E7%B1%BB"><span class="toc-number">18.2.</span> <span class="toc-text">FilterConfig 类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#filterchain-%E8%BF%87%E6%BB%A4%E5%99%A8%E9%93%BE"><span class="toc-number">18.3.</span> <span class="toc-text">FilterChain 过滤器链</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8B%A6%E6%88%AA%E8%B7%AF%E5%BE%84%E7%9A%84%E4%B8%89%E7%A7%8D%E5%8C%B9%E9%85%8D%E6%96%B9%E6%B3%95"><span class="toc-number">18.4.</span> <span class="toc-text">拦截路径的三种匹配方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8B%A6%E6%88%AA%E6%96%B9%E5%BC%8F%E7%9A%84%E9%85%8D%E7%BD%AE"><span class="toc-number">18.5.</span> <span class="toc-text">拦截方式的配置</span></a></li></ol></li></ol></div><div class="related panel pjax" data-title="系列文章"><ul><li><a href="/2021/10/21/%E5%90%8E%E7%AB%AF/JavaWeb/Maven/" rel="bookmark" title="Maven笔记">Maven笔记</a></li><li class="active"><a href="/2021/10/21/%E5%90%8E%E7%AB%AF/JavaWeb/servlet/" rel="bookmark" title="JavaWeb笔记">JavaWeb笔记</a></li><li><a href="/2021/10/21/%E5%90%8E%E7%AB%AF/JavaWeb/JDBC/" rel="bookmark" title="JDBC笔记">JDBC笔记</a></li><li><a href="/2021/10/21/%E5%90%8E%E7%AB%AF/JavaWeb/JWT/" rel="bookmark" title="JWT令牌">JWT令牌</a></li><li><a href="/2021/10/21/%E5%90%8E%E7%AB%AF/JavaWeb/JSP/" rel="bookmark" title="JSP模板引擎基本使用">JSP模板引擎基本使用</a></li><li><a href="/2021/10/21/%E5%90%8E%E7%AB%AF/JavaWeb/Thymeleaf/" rel="bookmark" title="Thymeleaf模板引擎基本使用">Thymeleaf模板引擎基本使用</a></li></ul></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="故犹" data-src="/images/avatar.jpg"><p class="name" itemprop="name">故犹</p><div class="description" itemprop="description"></div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">197</span> <span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">38</span> <span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">94</span> <span class="name">标签</span></a></div></nav><div class="social"><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL2d1eW91d3lo" title="https:&#x2F;&#x2F;github.com&#x2F;guyouwyh"><i class="ic i-github"></i></span> <a href="/821403296@qq.com" title="821403296@qq.com" class="item email"><i class="ic i-envelope"></i></a></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li><li class="item"><a href="/friends/" rel="section"><i class="ic i-link"></i>友链</a></li><li class="item"><a href="/about/" rel="section"><i class="ic i-magic"></i>常用网站</a></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/2021/10/21/%E5%90%8E%E7%AB%AF/JavaWeb/Maven/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/2021/10/21/%E5%90%8E%E7%AB%AF/JavaWeb/JDBC/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>随机文章</h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/%E7%AE%97%E6%B3%95/" title="分类于 算法">算法</a> <i class="ic i-angle-right"></i> <a href="/categories/%E7%AE%97%E6%B3%95/%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/" title="分类于 二分查找">二分查找</a></div><span><a href="/2021/10/22/%E7%AE%97%E6%B3%95/%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/%E5%8A%9B%E6%89%A333.%E6%90%9C%E7%B4%A2%E6%97%8B%E8%BD%AC%E6%95%B0%E7%BB%84/" title="【力扣】33.搜索旋转数组">【力扣】33.搜索旋转数组</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E7%AE%97%E6%B3%95/" title="分类于 算法">算法</a> <i class="ic i-angle-right"></i> <a href="/categories/%E7%AE%97%E6%B3%95/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/" title="分类于 动态规划">动态规划</a></div><span><a href="/2021/10/27/%E7%AE%97%E6%B3%95/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/%E6%9C%80%E5%A4%A7%E5%AD%90%E5%BA%8F%E5%92%8C/" title="【力扣】53.最大子序和">【力扣】53.最大子序和</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E7%AE%97%E6%B3%95/" title="分类于 算法">算法</a> <i class="ic i-angle-right"></i> <a href="/categories/%E7%AE%97%E6%B3%95/%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/" title="分类于 二分查找">二分查找</a></div><span><a href="/2022/04/02/%E7%AE%97%E6%B3%95/%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/%E6%9C%89%E5%BA%8F%E6%95%B0%E7%BB%84%E4%B8%AD%E7%9A%84%E5%8D%95%E4%B8%80%E5%85%83%E7%B4%A0/" title="【力扣】540. 有序数组中的单一元素">【力扣】540. 有序数组中的单一元素</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E7%AE%97%E6%B3%95/" title="分类于 算法">算法</a> <i class="ic i-angle-right"></i> <a href="/categories/%E7%AE%97%E6%B3%95/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/" title="分类于 动态规划">动态规划</a></div><span><a href="/2022/04/15/%E7%AE%97%E6%B3%95/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/%E5%9B%9E%E6%96%87%E5%AD%90%E4%B8%B2/" title="【力扣】647. 回文子串">【力扣】647. 回文子串</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E7%AE%97%E6%B3%95/" title="分类于 算法">算法</a> <i class="ic i-angle-right"></i> <a href="/categories/%E7%AE%97%E6%B3%95/%E6%90%9C%E7%B4%A2/" title="分类于 搜索">搜索</a></div><span><a href="/2022/04/04/%E7%AE%97%E6%B3%95/%E6%90%9C%E7%B4%A2/%E5%AD%90%E9%9B%86%E9%97%AE%E9%A2%98/" title="关于求所有子集问题的一些心得">关于求所有子集问题的一些心得</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E7%AE%97%E6%B3%95/" title="分类于 算法">算法</a> <i class="ic i-angle-right"></i> <a href="/categories/%E7%AE%97%E6%B3%95/%E6%90%9C%E7%B4%A2/" title="分类于 搜索">搜索</a></div><span><a href="/2022/02/01/%E7%AE%97%E6%B3%95/%E6%90%9C%E7%B4%A2/%20%E5%8D%95%E8%AF%8D%E6%96%B9%E9%98%B5/" title="【洛谷】P1101 单词方阵">【洛谷】P1101 单词方阵</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E7%AE%97%E6%B3%95/" title="分类于 算法">算法</a> <i class="ic i-angle-right"></i> <a href="/categories/%E7%AE%97%E6%B3%95/%E9%80%92%E6%8E%A8%E4%B8%8E%E9%80%92%E5%BD%92/" title="分类于 递推与递归">递推与递归</a></div><span><a href="/2022/04/08/%E7%AE%97%E6%B3%95/%E9%80%92%E6%8E%A8%E4%B8%8E%E9%80%92%E5%BD%92/%E4%B8%A4%E6%95%B0%E7%9B%B8%E5%8A%A0II/" title="【力扣】445. 两数相加 II">【力扣】445. 两数相加 II</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E5%90%8E%E7%AB%AF/" title="分类于 后端">后端</a> <i class="ic i-angle-right"></i> <a href="/categories/%E5%90%8E%E7%AB%AF/Java/" title="分类于 Java基础">Java基础</a></div><span><a href="/2021/10/21/%E5%90%8E%E7%AB%AF/Java/jvm6/" title="JVM笔记(六)-垃圾回收">JVM笔记(六)-垃圾回收</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E7%AE%97%E6%B3%95/" title="分类于 算法">算法</a> <i class="ic i-angle-right"></i> <a href="/categories/%E7%AE%97%E6%B3%95/%E9%80%92%E6%8E%A8%E4%B8%8E%E9%80%92%E5%BD%92/" title="分类于 递推与递归">递推与递归</a></div><span><a href="/2022/03/28/%E7%AE%97%E6%B3%95/%E9%80%92%E6%8E%A8%E4%B8%8E%E9%80%92%E5%BD%92/%E4%BA%8C%E5%8F%89%E6%90%9C%E7%B4%A2%E6%A0%91%E4%B8%8E%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/" title="【牛客】JZ36 二叉搜索树与双向链表">【牛客】JZ36 二叉搜索树与双向链表</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E5%90%8E%E7%AB%AF/" title="分类于 后端">后端</a> <i class="ic i-angle-right"></i> <a href="/categories/%E5%90%8E%E7%AB%AF/Java/" title="分类于 Java基础">Java基础</a></div><span><a href="/2021/10/20/%E5%90%8E%E7%AB%AF/Java/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1(%E4%BA%8C)/" title="Java面向对象(二)">Java面向对象(二)</a></span></li></ul></div></div><div class="status"><div class="copyright">&copy; 2020 – <span itemprop="copyrightYear">2022</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">故犹 @ GuYou</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="站点总字数">582k 字</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="站点阅读时长">8:49</span></div><div class="powered-by">基于 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"2021/10/21/后端/JavaWeb/servlet/",favicon:{show:"加载中",hide:"OvO"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},valine:!0,fancybox:!0,copyright:'复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script></body></html><!-- rebuild by hrmmi -->